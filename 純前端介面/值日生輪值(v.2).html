<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¬å¸åŒä»å€¼æ—¥ç”Ÿè¼ªå€¼è¡¨ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #8dd3c7 0%, #7db3a8 100%);
            min-height: 100vh;
            color: #2d5a5a;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            color: #2d5a5a;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #5a8080;
            font-size: 1.1rem;
        }
        
        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            gap: 10px;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
            color: #5a8080;
        }
        
        .nav-tab:hover {
            background: rgba(129, 216, 208, 0.15);
            color: #2d5a5a;
            transform: translateY(-2px);
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #81d8d0 0%, #7db3a8 100%);
            color: white;
            box-shadow: 0 5px 20px rgba(129, 216, 208, 0.3);
        }
        
        .tab-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #e6f7f5;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #2d5a5a;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #81d8d0 0%, #7db3a8 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(129, 216, 208, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #a8d8d0 0%, #81d8d0 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #b8d4d1 0%, #9bc7c2 100%);
            color: white;
        }
        
        .btn-secondary {
            background: #e6f7f5;
            color: #2d5a5a;
        }
        
        .calendar-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #81d8d0 0%, #7db3a8 100%);
            color: white;
            border-radius: 10px;
        }
        
        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .calendar-nav button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .calendar-nav button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: #e6f7f5;
            border-radius: 10px;
            padding: 2px;
        }
        
        .calendar-day {
            background: white;
            padding: 15px 10px;
            min-height: 100px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .calendar-day:hover {
            background: #f0fffe;
            transform: scale(1.02);
        }
        
        .day-number {
            font-weight: 600;
            color: #5a8080;
            margin-bottom: 5px;
        }
        
        .duty-person {
            background: linear-gradient(135deg, #81d8d0 0%, #7db3a8 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            margin: 2px 0;
            display: block;
        }
        
        .weekend {
            background: #e6f7f5 !important;
        }
        
        .holiday {
            background: #d4f2ef !important;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .form-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d5a5a;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e6f7f5;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #81d8d0;
            box-shadow: 0 0 0 3px rgba(129, 216, 208, 0.1);
        }
        
        .task-list {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e6f7f5;
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            background: #f0fffe;
        }
        
        .task-info h4 {
            color: #2d5a5a;
            margin-bottom: 5px;
        }
        
        .task-info p {
            color: #5a8080;
            font-size: 0.9rem;
        }
        
        .priority-high {
            border-left: 4px solid #b8d4d1;
        }
        
        .priority-medium {
            border-left: 4px solid #9bc7c2;
        }
        
        .priority-low {
            border-left: 4px solid #81d8d0;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }
        
        .status-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #81d8d0;
            margin-bottom: 10px;
        }
        
        .status-label {
            color: #5a8080;
            font-size: 1.1rem;
        }
        
        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .notification-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            margin-bottom: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .notification-info {
            flex: 1;
        }
        
        .notification-time {
            color: #5a8080;
            font-size: 0.8rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.8) translateY(-50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .modal-header h3 {
            color: #2d5a5a;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #5a8080;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .settings-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }
        
        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .employee-card {
            background: white;
            border: 2px solid #e6f7f5;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .employee-card:hover {
            border-color: #81d8d0;
            transform: translateY(-2px);
        }
        
        .employee-card.selected {
            border-color: #81d8d0;
            background: rgba(129, 216, 208, 0.1);
        }
        
        /* èª¿ç­ç‹€æ…‹é¡è‰² */
        .status-pending {
            background: #f0fffe;
            border: 1px solid #d4f2ef;
            color: #2d5a5a;
        }
        
        .status-approved {
            background: #e6f7f5;
            border: 1px solid #a8d8d0;
            color: #2d5a5a;
        }
        
        .status-rejected {
            background: #f5f5f5;
            border: 1px solid #d4d4d4;
            color: #666666;
        }
        
        /* å¯ä»£ç­ç‹€æ…‹ */
        .available {
            color: #81d8d0;
        }
        
        .unavailable {
            color: #b8d4d1;
        }
        
        /* å·¥ä½œæ—¥æ›†é¡è‰² */
        .work-day {
            background: #e6f7f5;
        }
        
        .leave-day {
            background: #f0fffe;
        }
        
        .holiday-day {
            background: #d4f2ef;
        }
        
        .special-work {
            background: #f5fcfb;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.8rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“… å…¬å¸åŒä»å€¼æ—¥ç”Ÿè¼ªå€¼è¡¨ç³»çµ±</h1>
            <p>æ™ºèƒ½åŒ–å€¼æ—¥ç”Ÿç®¡ç†ç³»çµ±ï¼Œè®“è¾¦å…¬ç’°å¢ƒç¶­è­·æ›´æœ‰æ•ˆç‡</p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('schedule')">ğŸ“‹ å€¼æ—¥æ’ç­è¡¨</button>
            <button class="nav-tab" onclick="switchTab('tasks')">âœ… å€¼æ—¥äº‹é …ç®¡ç†</button>
            <button class="nav-tab" onclick="switchTab('substitute')">ğŸ”„ ç·Šæ€¥èª¿ç­</button>
            <button class="nav-tab" onclick="switchTab('employees')">ğŸ‘¥ å“¡å·¥åƒæ•¸è¨­å®š</button>
            <button class="nav-tab" onclick="switchTab('holidays')">ğŸ¯ ä¼‘å‡æ—¥è¨­å®š</button>
        </div>
        
        <div class="tab-content">
            <!-- å€¼æ—¥æ’ç­è¡¨ -->
            <div class="tab-pane active" id="schedule">
                <div class="section-header">
                    <h2 class="section-title">å€¼æ—¥æ’ç­è¡¨</h2>
                    <div>
                        <button class="btn btn-primary" onclick="generateSchedule()">ğŸ² ç”¢ç”Ÿä¸‹æœˆæ’ç­</button>
                        <button class="btn btn-secondary" onclick="exportSchedule()">ğŸ“¤ åŒ¯å‡ºæ’ç­è¡¨</button>
                        <button class="btn btn-warning" onclick="clearSchedule()" style="margin-left: 10px;">ğŸ—‘ï¸ æ¸…é™¤æ’ç­</button>
                    </div>
                </div>
                
                <div class="status-grid">
                    <div class="status-card">
                        <div class="status-number">0</div>
                        <div class="status-label">ä»Šæ—¥å€¼æ—¥ç”Ÿ</div>
                    </div>
                    <div class="status-card">
                        <div class="status-number">0</div>
                        <div class="status-label">æœ¬æœˆå·¥ä½œæ—¥</div>
                    </div>
                    <div class="status-card">
                        <div class="status-number">0</div>
                        <div class="status-label">å¾…æ’ç­äººæ¬¡</div>
                    </div>
                    <div class="status-card">
                        <div class="status-number">12</div>
                        <div class="status-label">åƒèˆ‡å“¡å·¥æ•¸</div>
                    </div>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="calendar-nav">
                            <button onclick="previousMonth()">â—€</button>
                            <h3 id="currentMonth">2024å¹´ 8æœˆ</h3>
                            <button onclick="nextMonth()">â–¶</button>
                            <button onclick="goToToday()" style="background: rgba(255, 255, 255, 0.3); margin-left: 10px;">ğŸ“… ä»Šå¤©</button>
                        </div>
                        <div class="calendar-nav">
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    <div style="width: 15px; height: 15px; background: #88e1d8; border-radius: 3px;"></div>
                                    å·¥ä½œæ—¥
                                </span>
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    <div style="width: 15px; height: 15px; background: #e6f7f5; border-radius: 3px;"></div>
                                    é€±æœ«
                                </span>
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    <div style="width: 15px; height: 15px; background: #e3bae7; border-radius: 3px;"></div>
                                    åœ‹å®šå‡æ—¥
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- æ—¥æ›†æ ¼å­æœƒç”±JavaScriptç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- å€¼æ—¥äº‹é …ç®¡ç† -->
            <div class="tab-pane" id="tasks">
                <div class="section-header">
                    <h2 class="section-title">å€¼æ—¥äº‹é …ç®¡ç†</h2>
                    <button class="btn btn-primary" onclick="openModal('taskModal')">â• æ–°å¢äº‹é …</button>
                
                </div>
                
                <div class="task-list" id="taskListContainer">
                    <!-- ä»»å‹™åˆ—è¡¨æœƒç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
            
            <!-- ç·Šæ€¥èª¿ç­ -->
            <div class="tab-pane" id="substitute">
                <div class="section-header">
                    <h2 class="section-title">ç·Šæ€¥èª¿ç­ç®¡ç†</h2>
                    <button class="btn btn-warning" onclick="openModal('substituteModal')">äººå“¡èª¿æ›</button>
                </div>
                
                <div class="form-grid">
                    <div class="form-section">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“‹ å¾…è™•ç†ç”³è«‹</h3>
                        <div class="status-pending" style="border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <strong>ç‹å°æ˜ - 8/25 èª¿ç­ç”³è«‹</strong>
                                <span style="background: #d4f2ef; color: #2d5a5a; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">å¾…å¯©æ ¸</span>
                            </div>
                            <p style="color: #5a8080; margin-bottom: 10px;">åŸå› ï¼šè‡¨æ™‚å®¶åº­äº‹å‹™</p>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-success" style="padding: 8px 16px; font-size: 0.8rem;">âœ… åŒæ„</button>
                                <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 0.8rem;">âŒ æ‹’çµ•</button>
                            </div>
                        </div>
                        
                        <div class="status-approved" style="border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <strong>æå°è¯ - 8/23 èª¿ç­ç”³è«‹</strong>
                                <span style="background: #a8d8d0; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">å·²è™•ç†</span>
                            </div>
                            <p style="color: #5a8080;">å·²å®‰æ’å¼µå¤§å¯¶ä»£ç­</p>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ‘¥ å¯ä»£ç­äººå“¡</h3>
                        <div class="employee-grid">
                            <div class="employee-card">
                                <div style="font-weight: bold;">å¼µå¤§å¯¶</div>
                                <div class="available" style="font-size: 0.8rem;">å¯ä»£ç­</div>
                            </div>
                            <div class="employee-card">
                                <div style="font-weight: bold;">é™³å°ç¾</div>
                                <div class="available" style="font-size: 0.8rem;">å¯ä»£ç­</div>
                            </div>
                            <div class="employee-card">
                                <div style="font-weight: bold;">åŠ‰å¤§è¡›</div>
                                <div class="unavailable" style="font-size: 0.8rem;">è«‹å‡ä¸­</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“Š èª¿ç­è¨˜éŒ„</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #f0fffe;">
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e6f7f5;">æ—¥æœŸ</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e6f7f5;">åŸå€¼æ—¥ç”Ÿ</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e6f7f5;">ä»£ç­äººå“¡</th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e6f7f5;">åŸå› </th>
                                    <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e6f7f5;">ç‹€æ…‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">2024-08-23</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">æå°è¯</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">å¼µå¤§å¯¶</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">è‡¨æ™‚æœƒè­°</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;"><span style="background: #a8d8d0; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">å·²å®Œæˆ</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">2024-08-20</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">ç‹å°æ˜</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">é™³å°ç¾</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;">èº«é«”ä¸é©</td>
                                    <td style="padding: 12px; border-bottom: 1px solid #e6f7f5;"><span style="background: #a8d8d0; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">å·²å®Œæˆ</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- å“¡å·¥åƒæ•¸è¨­å®š -->
            <div class="tab-pane" id="employees">
                <div class="section-header">
                    <h2 class="section-title">å“¡å·¥åƒæ•¸è¨­å®š</h2>
                    <button class="btn btn-primary" onclick="openModal('employeeModal')">ğŸ‘¤ æ–°å¢å“¡å·¥</button>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“… æœˆä»½è¨­å®š</h3>
                        <div class="form-group">
                            <label class="form-label">é¸æ“‡å¹´æœˆ</label>
                            <input type="month" class="form-control" value="2024-08">
                        </div>
                        <button class="btn btn-primary" style="width: 100%;">è¼‰å…¥æœˆä»½è³‡æ–™</button>
                    </div>
                    
                    <div class="settings-card">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ‘¥ å“¡å·¥é¸æ“‡</h3>
                        <div class="form-group">
                            <label class="form-label">æœå°‹å“¡å·¥</label>
                            <input type="text" class="form-control" placeholder="è¼¸å…¥å“¡å·¥å§“åæˆ–å·¥è™Ÿ...">
                        </div>
                        <div class="employee-grid">
                            <div class="employee-card selected">
                                <div style="font-weight: bold;">ç‹å°æ˜</div>
                                <div style="color: #5a8080; font-size: 0.8rem;">A001</div>
                            </div>
                            <div class="employee-card">
                                <div style="font-weight: bold;">æå°è¯</div>
                                <div style="color: #5a8080; font-size: 0.8rem;">A002</div>
                            </div>
                            <div class="employee-card">
                                <div style="font-weight: bold;">å¼µå¤§å¯¶</div>
                                <div style="color: #5a8080; font-size: 0.8rem;">A003</div>
                            </div>
                            <div class="employee-card">
                                <div style="font-weight: bold;">é™³å°ç¾</div>
                                <div style="color: #5a8080; font-size: 0.8rem;">A004</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card" style="margin-top: 30px;">
                    <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“‹ å·¥ä½œæ—¥æ›†è¨­å®š - ç‹å°æ˜ (2024å¹´8æœˆ)</h3>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-bottom: 20px;">
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">æ—¥</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">ä¸€</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">äºŒ</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">ä¸‰</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">å››</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">äº”</div>
                        <div style="text-align: center; font-weight: bold; padding: 10px; color: #2d5a5a;">å…­</div>
                        
                        <!-- æ—¥æ›†æ ¼å­ -->
                        <div style="padding: 8px; text-align: center; background: #dfbde3; border-radius: 5px; cursor: pointer; color: #2d5a5a;">1</div>
                        <div style="padding: 8px; text-align: center; background: #e4bc76; border-radius: 5px; cursor: pointer; color: #2d5a5a;">2</div>
                        <div style="padding: 8px; text-align: center; background: #d0f9f4; border-radius: 5px; cursor: pointer; color: #2d5a5a;">3</div>
                        <div style="padding: 8px; text-align: center; background: #d0f9f4; border-radius: 5px; cursor: pointer; color: #2d5a5a;">4</div>
                        <div style="padding: 8px; text-align: center; background: #d0f9f4; border-radius: 5px; cursor: pointer; color: #2d5a5a;">5</div>
                        <div style="padding: 8px; text-align: center; background: #d0f9f4; border-radius: 5px; cursor: pointer; color: #2d5a5a;">6</div>
                        <div style="padding: 8px; text-align: center; background: #d0f9f4; border-radius: 5px; cursor: pointer; color: #2d5a5a;">7</div>
                    </div>
                    
                    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 20px; background: #d0f9f4; border-radius: 4px;"></div>
                            <span>æ­£å¸¸ä¸Šç­</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 20px; background: #e4bc76; border-radius: 4px;"></div>
                            <span>è«‹å‡</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 20px; background: #dfbde3; border-radius: 4px;"></div>
                            <span>ä¼‘å‡</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 20px; height: 20px; background: #e3f2b3; border-radius: 4px;"></div>
                            <span>ç‰¹æ®Šä¸Šç­</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-success">ğŸ’¾ å„²å­˜è¨­å®š</button>
                        <button class="btn btn-secondary">ğŸ”„ é‡è¨­</button>
                        <button class="btn btn-primary">ğŸ“¤ æ‰¹é‡è¨­å®š</button>
                    </div>
                </div>
            </div>
            
            <!-- ä¼‘å‡æ—¥è¨­å®š -->
            <div class="tab-pane" id="holidays">
                <div class="section-header">
                    <h2 class="section-title">ä¼‘å‡æ—¥åƒæ•¸è¨­å®š</h2>
                    <div>
                        <button class="btn btn-primary" onclick="openModal('holidayModal')">ğŸ¯ æ–°å¢å‡æ—¥</button>
                        <button class="btn btn-secondary" onclick="importTemplate()">ğŸ“¥ åŒ¯å…¥ç¯„æœ¬</button>
                    </div>
                </div>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“… å¹´åº¦é¸æ“‡</h3>
                        <div class="form-group">
                            <label class="form-label">é¸æ“‡å¹´åº¦</label>
                            <select class="form-control">
                                <option value="2024" selected>2024å¹´</option>
                                <option value="2025">2025å¹´</option>
                                <option value="2026">2026å¹´</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" style="width: 100%;">è¼‰å…¥å¹´åº¦è³‡æ–™</button>
                    </div>
                    
                    <div class="settings-card">
                        <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ“Š å‡æ—¥çµ±è¨ˆ</h3>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>åœ‹å®šå‡æ—¥ï¼š</span>
                            <span style="font-weight: bold; color: #81d8d0;">15 å¤©</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>å½ˆæ€§æ”¾å‡ï¼š</span>
                            <span style="font-weight: bold; color: #9bc7c2;">8 å¤©</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>è£œç­æ—¥ï¼š</span>
                            <span style="font-weight: bold; color: #b8d4d1;">6 å¤©</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>å…¬å¸å‡æ—¥ï¼š</span>
                            <span style="font-weight: bold; color: #a8d8d0;">3 å¤©</span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card" style="margin-top: 30px;">
                    <h3 style="margin-bottom: 20px; color: #2d5a5a;">ğŸ—“ï¸ 2024å¹´å‡æ—¥è¨­å®š</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: #f0fffe; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #2d5a5a; margin-bottom: 15px;">ğŸŠ ç¬¬ä¸€å­£å‡æ—¥</h4>
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>å…ƒæ—¦</span>
                                    <span style="color: #5a8080;">1/1</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>æ˜¥ç¯€å‡æœŸ</span>
                                    <span style="color: #5a8080;">2/8-2/14</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>å’Œå¹³ç´€å¿µæ—¥</span>
                                    <span style="color: #5a8080;">2/28</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f0fffe; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #2d5a5a; margin-bottom: 15px;">ğŸŒ¸ ç¬¬äºŒå­£å‡æ—¥</h4>
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>å…’ç«¥ç¯€</span>
                                    <span style="color: #5a8080;">4/4</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>æ¸…æ˜ç¯€</span>
                                    <span style="color: #5a8080;">4/5</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>å‹å‹•ç¯€</span>
                                    <span style="color: #5a8080;">5/1</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f0fffe; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #2d5a5a; margin-bottom: 15px;">â˜€ï¸ ç¬¬ä¸‰å­£å‡æ—¥</h4>
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>ç«¯åˆç¯€</span>
                                    <span style="color: #5a8080;">6/10</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>å…¬å¸é€±å¹´æ…¶</span>
                                    <span style="color: #5a8080;">8/15</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f0fffe; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #2d5a5a; margin-bottom: 15px;">ğŸ‚ ç¬¬å››å­£å‡æ—¥</h4>
                            <div style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>ä¸­ç§‹ç¯€</span>
                                    <span style="color: #5a8080;">9/17</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>åœ‹æ…¶æ—¥</span>
                                    <span style="color: #5a8080;">10/10</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e6f7f5;">
                                    <span>è–èª•ç¯€</span>
                                    <span style="color: #5a8080;">12/25</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; display: flex; gap: 10px;">
                        <button class="btn btn-success">ğŸ’¾ å„²å­˜è¨­å®š</button>
                        <button class="btn btn-secondary">ğŸ”„ é‡è¨­</button>
                        <button class="btn btn-primary">ğŸ‘ï¸ é è¦½æª¢æŸ¥</button>
                        <button class="btn btn-warning">ğŸ“¤ åŒ¯å‡ºè¨­å®š</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab panes
            const tabPanes = document.querySelectorAll('.tab-pane');
            tabPanes.forEach(pane => pane.classList.remove('active'));
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab pane
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        // Calendar functionality
        let currentDate = new Date();
        
        function generateCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Update month display
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', 
                              '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            document.getElementById('currentMonth').textContent = `${year}å¹´ ${monthNames[month]}`;
            
            // Clear calendar
            calendarGrid.innerHTML = '';
            
            // Add day headers
            const dayHeaders = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.style.cssText = 'background: #81d8d0; color: white; padding: 10px; text-align: center; font-weight: bold;';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                emptyDay.style.background = '#f8f9fa';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                const dayOfWeek = (firstDay + day - 1) % 7;
                
                // Apply weekend styling
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    dayElement.classList.add('weekend');
                }
                
                // Add day number
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                dayElement.appendChild(dayNumber);
                
                // Add duty person (sample data)
                if (day % 3 === 1 && dayOfWeek !== 0 && dayOfWeek !== 6) {
                    const dutyPerson = document.createElement('div');
                    dutyPerson.className = 'duty-person';
                    const employees = ['ç‹å°æ˜', 'æå°è¯', 'å¼µå¤§å¯¶', 'é™³å°ç¾'];
                    dutyPerson.textContent = employees[Math.floor(Math.random() * employees.length)];
                    dayElement.appendChild(dutyPerson);
                }
                
                calendarGrid.appendChild(dayElement);
            }
        }
        
        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }
        
        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }
        
        function goToToday() {
            currentDate = new Date();
            generateCalendar();
        }
        
        // Modal functionality
        function openModal(modalId) {
            // Create and show modal (simplified for demo)
            alert('åŠŸèƒ½é–‹ç™¼ä¸­...');
        }
        
        // Other functions
        function generateSchedule() {
            alert('ç”¢ç”Ÿä¸‹æœˆæ’ç­åŠŸèƒ½é–‹ç™¼ä¸­...');
        }
        
        function exportSchedule() {
            alert('åŒ¯å‡ºæ’ç­è¡¨åŠŸèƒ½é–‹ç™¼ä¸­...');
        }
        
        function clearSchedule() {
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æ’ç­è³‡æ–™å—ï¼Ÿ')) {
                alert('æ’ç­å·²æ¸…é™¤');
                generateCalendar();
            }
        }
        
        function importTemplate() {
            alert('åŒ¯å…¥ç¯„æœ¬åŠŸèƒ½é–‹ç™¼ä¸­...');
        }
        
        // Initialize calendar on page load
        document.addEventListener('DOMContentLoaded', function() {
            generateCalendar();
        });
    </script>
</body>

    
    <!-- æ–°å¢äº‹é … Modal -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('taskModal')">Ã—</button>
            <div class="modal-header">
                <h3>â• æ–°å¢å€¼æ—¥äº‹é …</h3>
                <p style="color: #718096;">å»ºç«‹æ–°çš„å€¼æ—¥å·¥ä½œäº‹é …</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">äº‹é …åç¨±</label>
                <input type="text" id="taskName" class="form-control" placeholder="ä¾‹ï¼šæ¸…æ½”è¾¦å…¬å€åŸŸåœ°é¢">
            </div>
            
            <div class="form-group">
                <label class="form-label">è©³ç´°èªªæ˜</label>
                <textarea id="taskDescription" class="form-control" rows="3" placeholder="è©³ç´°æè¿°å·¥ä½œå…§å®¹å’ŒåŸ·è¡Œæ–¹å¼..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">å„ªå…ˆé †åº</label>
                <select id="taskPriority" class="form-control">
                    <option value="high">å¿…è¦</option>
                    <option value="medium">å»ºè­°</option>
                    <option value="low">é¸æ“‡æ€§</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button class="btn btn-primary" style="flex: 1;" onclick="addNewTask()">âœ… å»ºç«‹äº‹é …</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('taskModal')">âŒ å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- èª¿ç­ç”³è«‹ Modal -->
    <div class="modal" id="substituteModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('substituteModal')">Ã—</button>
            <div class="modal-header">
                <h3>ğŸ”„ äººå“¡èª¿æ›</h3>
                <p style="color: #718096;">ç®¡ç†å“¡èª¿æ›å€¼æ—¥äººå“¡</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">èª¿æ›æ—¥æœŸ</label>
                <input type="date" id="substituteDate" class="form-control">
            </div>
            
            <div class="form-group">
                <label class="form-label">å»ºè­°ä»£ç­äººå“¡</label>
                <select id="substituteEmployee" class="form-control">
                    <option value="">è«‹é¸æ“‡ä»£ç­äººå“¡</option>
                    <!-- é¸é …æœƒç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                </select>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button class="btn btn-warning" style="flex: 1;" onclick="confirmSubstitute()">âœ… ç¢ºèª</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('substituteModal')">âŒ å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- æ–°å¢å“¡å·¥ Modal -->
    <div class="modal" id="employeeModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('employeeModal')">Ã—</button>
            <div class="modal-header">
                <h3>ğŸ‘¤ æ–°å¢å“¡å·¥</h3>
                <p style="color: #718096;">æ–°å¢åƒèˆ‡å€¼æ—¥çš„å“¡å·¥è³‡æ–™</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">å“¡å·¥å§“å</label>
                <input type="text" class="form-control" placeholder="è«‹è¼¸å…¥å“¡å·¥å§“å">
            </div>
            
    
            
            <div class="form-group">
                <label class="form-label">éƒ¨é–€</label>
                <select class="form-control">
                    <option value="">è«‹é¸æ“‡éƒ¨é–€</option>
                    <option value="hr">äººåŠ›è³‡æºéƒ¨</option>
                    <option value="it">è³‡è¨ŠæŠ€è¡“éƒ¨</option>
                    <option value="finance">è²¡å‹™éƒ¨</option>
                    <option value="sales">æ¥­å‹™éƒ¨</option>
                    <option value="admin">è¡Œæ”¿éƒ¨</option>
                </select>
            </div>
            
            
            
            <div class="form-group">
                <label class="form-label">é›»å­éƒµä»¶</label>
                <input type="email" class="form-control" placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶">
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button class="btn btn-primary" style="flex: 1;">âœ… æ–°å¢å“¡å·¥</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('employeeModal')">âŒ å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- æ–°å¢å‡æ—¥ Modal -->
    <div class="modal" id="holidayModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('holidayModal')">Ã—</button>
            <div class="modal-header">
                <h3>ğŸ¯ æ–°å¢å‡æ—¥</h3>
                <p style="color: #718096;">æ–°å¢åœ‹å®šå‡æ—¥æˆ–å…¬å¸ç‰¹æ®Šå‡æ—¥</p>
            </div>
            
            <div class="form-group">
                <label class="form-label">å‡æ—¥åç¨±</label>
                <input type="text" class="form-control" placeholder="ä¾‹ï¼šå…¬å¸æˆç«‹ç´€å¿µæ—¥">
            </div>
            
            <div class="form-group">
                <label class="form-label">å‡æ—¥é¡å‹</label>
                <select class="form-control">
                    <option value="national">åœ‹å®šå‡æ—¥</option>
                    <option value="flexible">å½ˆæ€§æ”¾å‡</option>
                    <option value="company">å…¬å¸å‡æ—¥</option>
                    <option value="makeup">è£œç­æ—¥</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">é–‹å§‹æ—¥æœŸ</label>
                <input type="date" class="form-control">
            </div>
            
            <div class="form-group">
                <label class="form-label">çµæŸæ—¥æœŸ</label>
                <input type="date" class="form-control">
            </div>
            
    
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button class="btn btn-primary" style="flex: 1;">âœ… æ–°å¢å‡æ—¥</button>
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('holidayModal')">âŒ å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // æ¨™ç±¤åˆ‡æ›åŠŸèƒ½
        function switchTab(tabName) {
            // ç§»é™¤æ‰€æœ‰æ´»å‹•ç‹€æ…‹
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
            
            // æ·»åŠ æ–°çš„æ´»å‹•ç‹€æ…‹
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Modal æ§åˆ¶åŠŸèƒ½
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // é»æ“Š modal å¤–éƒ¨é—œé–‰
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // å…¨åŸŸè®Šæ•¸å„²å­˜ç•¶å‰æ—¥æœŸå’Œæ’ç­è³‡æ–™
        let currentYear = 2024;
        let currentMonthIndex = 7; // 0=1æœˆ, 7=8æœˆ
        let scheduleData = {}; // å„²å­˜æ‰€æœ‰æœˆä»½çš„æ’ç­è³‡æ–™ï¼Œæ ¼å¼: { "2024-8": { 1: ["ç‹å°æ˜", "æå°è¯"], 2: ["å¼µå¤§å¯¶", "é™³å°ç¾"] } }
        let employees = ['ç‹å°æ˜', 'æå°è¯', 'å¼µå¤§å¯¶', 'é™³å°ç¾', 'åŠ‰å¤§è¡›', 'è¶™å°èŠ±', 'å³å°å¼·', 'æ—å°ç¾', 'é»ƒå¤§æ˜', 'é„­å°è¯', 'è”¡å°è‹±', 'è¨±å¤§å¯¶'];
        
        // å€¼æ—¥äº‹é …ç®¡ç†
        let taskList = [
            {
                id: 1,
                name: 'æ¸…æ½”è¾¦å…¬å€åŸŸåœ°é¢',
                description: 'ä½¿ç”¨æƒæŠŠå’Œæ‹–æŠŠæ¸…æ½”æ‰€æœ‰è¾¦å…¬å€åŸŸåœ°é¢',
                priority: 'high',
                completed: false
            },
            {
                id: 2,
                name: 'æ¸…ç©ºåƒåœ¾æ¡¶ä¸¦æ›´æ›åƒåœ¾è¢‹',
                description: 'æ¸…ç©ºæ‰€æœ‰è¾¦å…¬å®¤åƒåœ¾æ¡¶ï¼Œæ›´æ›æ–°çš„åƒåœ¾è¢‹',
                priority: 'high',
                completed: true
            },
          
            {
                id: 3,
                name: 'æ¾†çŒè¾¦å…¬å®¤æ¤ç‰©',
                description: 'ç‚ºè¾¦å…¬å®¤ç¶ è‰²æ¤ç‰©æ¾†æ°´',
                priority: 'low',
                completed: true
            }
        ];
        let nextTaskId = 5;
        
        // èª¿ç­è¨˜éŒ„
        let substituteRecords = [
            {
                id: 1,
                date: '2024-08-23',
                originalEmployee: 'æå°è¯',
                substituteEmployee: 'å¼µå¤§å¯¶'
            },
            {
                id: 2,
                date: '2024-08-20',
                originalEmployee: 'ç‹å°æ˜',
                substituteEmployee: 'é™³å°ç¾'
            }
        ];
        let nextSubstituteId = 3;

        // æ—¥æ›†ç”ŸæˆåŠŸèƒ½
        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const currentMonth = new Date(currentYear, currentMonthIndex, 1);
            const daysInMonth = new Date(currentYear, currentMonthIndex + 1, 0).getDate();
            const firstDay = currentMonth.getDay();
            
            // æ›´æ–°æœˆä»½æ¨™é¡Œ
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            document.getElementById('currentMonth').textContent = `${currentYear}å¹´ ${monthNames[currentMonthIndex]}`;
            
            // æ¸…ç©ºç¾æœ‰å…§å®¹
            grid.innerHTML = '';
            
            // æ·»åŠ æ˜ŸæœŸæ¨™é¡Œ
            const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            weekdays.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.textContent = day;
                dayHeader.style.cssText = `
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 15px;
                    text-align: center;
                    font-weight: bold;
                `;
                grid.appendChild(dayHeader);
            });

            // æ·»åŠ ç©ºç™½å¤©æ•¸
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                grid.appendChild(emptyDay);
            }

            // å–å¾—ç•¶å‰æœˆä»½çš„æ’ç­è³‡æ–™
            const monthKey = `${currentYear}-${currentMonthIndex}`;
            const monthSchedule = scheduleData[monthKey] || {};

            // æ·»åŠ æœ¬æœˆå¤©æ•¸
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                dayElement.appendChild(dayNumber);

                // åˆ¤æ–·æ˜¯å¦ç‚ºé€±æœ«
                const dayOfWeek = (firstDay + day - 1) % 7;
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    dayElement.classList.add('weekend');
                }

                // æ·»åŠ å‡æ—¥æ¨™è¨˜
                const holidays = getHolidaysForMonth(currentYear, currentMonthIndex);
                if (holidays.includes(day)) {
                    dayElement.classList.add('holiday');
                }

                // åªåœ¨å·¥ä½œæ—¥é¡¯ç¤ºå€¼æ—¥ç”Ÿï¼Œä¸”æœ‰æ’ç­è³‡æ–™æ™‚æ‰é¡¯ç¤º
                if (!dayElement.classList.contains('weekend') && !dayElement.classList.contains('holiday')) {
                    if (monthSchedule[day]) {
                        // æœ‰æ’ç­è³‡æ–™æ™‚é¡¯ç¤º
                        monthSchedule[day].forEach(person => {
                            const dutyPerson = document.createElement('span');
                            dutyPerson.className = 'duty-person';
                            dutyPerson.textContent = person;
                            dayElement.appendChild(dutyPerson);
                        });
                    } else {
                        // æ²’æœ‰æ’ç­è³‡æ–™æ™‚é¡¯ç¤ºæç¤º
                        const noSchedule = document.createElement('div');
                        noSchedule.style.cssText = `
                            color: #a0aec0;
                            font-size: 0.8rem;
                            text-align: center;
                            margin-top: 10px;
                            font-style: italic;
                        `;
                        noSchedule.textContent = 'æœªæ’ç­';
                        dayElement.appendChild(noSchedule);
                    }
                }

                grid.appendChild(dayElement);
            }
        }

        // ç”¢ç”Ÿæ’ç­åŠŸèƒ½
        function generateSchedule() {
            // è¨ˆç®—ä¸‹å€‹æœˆ
            let nextYear = currentYear;
            let nextMonth = currentMonthIndex + 1;
            
            if (nextMonth > 11) {
                nextMonth = 0;
                nextYear++;
            }
            
            const monthKey = `${nextYear}-${nextMonth}`;
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            
            // ç¢ºèªæ˜¯å¦è¦é‡æ–°ç”¢ç”Ÿæ’ç­
            if (scheduleData[monthKey]) {
                const confirm = window.confirm(`${nextYear}å¹´${monthNames[nextMonth]}å·²æœ‰æ’ç­è³‡æ–™ï¼Œæ˜¯å¦è¦é‡æ–°ç”¢ç”Ÿï¼Ÿ`);
                if (!confirm) return;
            }
            
            // ç²å–ä¸‹å€‹æœˆçš„å·¥ä½œæ—¥
            const workDays = getWorkDays(nextYear, nextMonth);
            
            if (workDays.length === 0) {
                alert('ä¸‹å€‹æœˆæ²’æœ‰å·¥ä½œæ—¥éœ€è¦æ’ç­ï¼');
                return;
            }
            
            // é¡¯ç¤ºç”¢ç”Ÿä¸­çš„æç¤º
            showNotification('ğŸ² ç”¢ç”Ÿæ’ç­ä¸­', `æ­£åœ¨ç‚º${nextYear}å¹´${monthNames[nextMonth]}ç”¢ç”Ÿæ’ç­...`);
            
            // æ¨¡æ“¬è™•ç†æ™‚é–“
            setTimeout(() => {
                // éš¨æ©Ÿåˆ†é…å€¼æ—¥ç”Ÿ
                const monthSchedule = {};
                const employeeWorkCount = {}; // è¨˜éŒ„æ¯å€‹å“¡å·¥çš„å€¼æ—¥æ¬¡æ•¸
                
                // åˆå§‹åŒ–å“¡å·¥å·¥ä½œæ¬¡æ•¸
                employees.forEach(emp => {
                    employeeWorkCount[emp] = 0;
                });
                
                workDays.forEach(day => {
                    // é¸æ“‡å…©ä½å€¼æ—¥ç”Ÿï¼Œå„ªå…ˆé¸æ“‡å€¼æ—¥æ¬¡æ•¸è¼ƒå°‘çš„å“¡å·¥
                    const selectedEmployees = [];
                    const availableEmployees = [...employees];
                    
                    // æŒ‰å€¼æ—¥æ¬¡æ•¸æ’åºï¼ˆå°‘çš„åœ¨å‰ï¼‰
                    availableEmployees.sort((a, b) => employeeWorkCount[a] - employeeWorkCount[b]);
                    
                    // é¸æ“‡å‰å…©ä½ï¼ˆæ·»åŠ ä¸€äº›éš¨æ©Ÿæ€§ï¼‰
                    for (let i = 0; i < 2; i++) {
                        let selectedIndex;
                        if (Math.random() < 0.7) {
                            // 70%æ©Ÿç‡é¸æ“‡å€¼æ—¥æ¬¡æ•¸æœ€å°‘çš„å‰3ä½
                            selectedIndex = Math.floor(Math.random() * Math.min(3, availableEmployees.length));
                        } else {
                            // 30%æ©Ÿç‡éš¨æ©Ÿé¸æ“‡
                            selectedIndex = Math.floor(Math.random() * availableEmployees.length);
                        }
                        
                        const selectedEmployee = availableEmployees.splice(selectedIndex, 1)[0];
                        selectedEmployees.push(selectedEmployee);
                        employeeWorkCount[selectedEmployee]++;
                    }
                    
                    monthSchedule[day] = selectedEmployees;
                });
                
                // å„²å­˜æ’ç­è³‡æ–™
                scheduleData[monthKey] = monthSchedule;
                
                // è·³è½‰åˆ°ä¸‹å€‹æœˆé¡¯ç¤ºçµæœ
                currentYear = nextYear;
                currentMonthIndex = nextMonth;
                generateCalendar();
                updateCalendarData();
                
                // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                showNotification('âœ… æ’ç­å®Œæˆ', `${nextYear}å¹´${monthNames[nextMonth]}æ’ç­å·²ç”¢ç”Ÿå®Œæˆï¼å…±${workDays.length}å€‹å·¥ä½œæ—¥ï¼Œ${workDays.length * 2}äººæ¬¡`);
                
                // æ›´æ–°çµ±è¨ˆè³‡æ–™
                updateStatistics();
                
            }, 1000); // 1ç§’å¾Œå®Œæˆ
        }
        
        // ç²å–æŒ‡å®šæœˆä»½çš„å·¥ä½œæ—¥
        function renderTaskList() {
            const container = document.getElementById('taskListContainer');
            container.innerHTML = '';
            
            if (taskList.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #a0aec0;">
                        <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ“</div>
                        <p>å°šæœªå»ºç«‹ä»»ä½•å€¼æ—¥äº‹é …</p>
                        <p style="font-size: 0.9rem;">é»æ“Šä¸Šæ–¹ã€Œâ• æ–°å¢äº‹é …ã€æŒ‰éˆ•é–‹å§‹å»ºç«‹</p>
                    </div>
                `;
                return;
            }
            
            taskList.forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = `task-item priority-${task.priority}`;
                
                const priorityLabels = {
                    high: { text: 'å¿…è¦', color: '#fed7d7', textColor: '#c53030' },
                    medium: { text: 'å»ºè­°', color: '#feebc8', textColor: '#c05621' },
                    low: { text: 'é¸æ“‡æ€§', color: '#c6f6d5', textColor: '#2f855a' }
                };
                
                const priority = priorityLabels[task.priority];
                const icon = getTaskIcon(task.name);
                
                taskItem.innerHTML = `
                    <div class="task-info">
                        <h4>${icon} ${task.name}</h4>
                        <p>${task.description}</p>
                    </div>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span style="background: ${priority.color}; color: ${priority.textColor}; padding: 4px 12px; border-radius: 6px; font-size: 0.8rem;">${priority.text}</span>
                        <input type="checkbox" ${task.completed ? 'checked' : ''} 
                               onchange="toggleTaskCompletion(${task.id})" 
                               style="transform: scale(1.3);">
                        <button onclick="deleteTask(${task.id})" 
                                style="background: #fed7d7; color: #c53030; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer;">ğŸ—‘ï¸</button>
                    </div>
                `;
                
                if (task.completed) {
                    taskItem.style.opacity = '0.7';
                    taskItem.style.textDecoration = 'line-through';
                }
                
                container.appendChild(taskItem);
            });
        }
        
        function getTaskIcon(taskName) {
            const name = taskName.toLowerCase();
            if (name.includes('æ¸…æ½”') || name.includes('æƒ')) return 'ğŸ§¹';
            if (name.includes('åƒåœ¾')) return 'ğŸ—‘ï¸';
            if (name.includes('ç…§æ˜') || name.includes('ç‡ˆ')) return 'ğŸ’¡';
            if (name.includes('æ¤ç‰©') || name.includes('æ¾†')) return 'ğŸŒ±';
            if (name.includes('æª¢æŸ¥')) return 'ğŸ”';
            if (name.includes('æ•´ç†')) return 'ğŸ“š';
            if (name.includes('æ¶ˆæ¯’')) return 'ğŸ§¼';
            return 'âœ…';
        }
        
        function updateTaskStatistics() {
            // ç§»é™¤çµ±è¨ˆæ›´æ–°åŠŸèƒ½ï¼Œå› ç‚ºçµ±è¨ˆå€å¡Šå·²åˆªé™¤
        }
        
        function addNewTask() {
            const name = document.getElementById('taskName').value.trim();
            const description = document.getElementById('taskDescription').value.trim();
            const priority = document.getElementById('taskPriority').value;
            
            if (!name) {
                alert('è«‹è¼¸å…¥äº‹é …åç¨±');
                return;
            }
            
            if (!description) {
                alert('è«‹è¼¸å…¥è©³ç´°èªªæ˜');
                return;
            }
            
            const newTask = {
                id: nextTaskId++,
                name: name,
                description: description,
                priority: priority,
                completed: false
            };
            
            taskList.push(newTask);
            
            // æ¸…ç©ºè¡¨å–®
            document.getElementById('taskName').value = '';
            document.getElementById('taskDescription').value = '';
            document.getElementById('taskPriority').value = 'high';
            
            // æ›´æ–°é¡¯ç¤º
            renderTaskList();
            
            // é—œé–‰modalä¸¦é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            closeModal('taskModal');
            showNotification('âœ… æ–°å¢æˆåŠŸ', `äº‹é …ã€Œ${name}ã€å·²æˆåŠŸæ–°å¢ï¼`);
        }
        
        function toggleTaskCompletion(taskId) {
            const task = taskList.find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                renderTaskList();
            }
        }
        
        function deleteTask(taskId) {
            const task = taskList.find(t => t.id === taskId);
            if (task && confirm(`ç¢ºå®šè¦åˆªé™¤äº‹é …ã€Œ${task.name}ã€å—ï¼Ÿ`)) {
                taskList = taskList.filter(t => t.id !== taskId);
                renderTaskList();
                showNotification('ğŸ—‘ï¸ åˆªé™¤å®Œæˆ', `äº‹é …ã€Œ${task.name}ã€å·²åˆªé™¤`);
            }
        }
        function getWorkDays(year, month) {
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const holidays = getHolidaysForMonth(year, month);
            const workDays = [];
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayOfWeek = new Date(year, month, day).getDay();
                const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
                const isHoliday = holidays.includes(day);
                
                if (!isWeekend && !isHoliday) {
                    workDays.push(day);
                }
            }
            
            return workDays;
        }

        function exportSchedule() {
            const monthKey = `${currentYear}-${currentMonthIndex}`;
            const monthSchedule = scheduleData[monthKey];
            
            if (!monthSchedule || Object.keys(monthSchedule).length === 0) {
                alert('ğŸ“¤ ç›®å‰æ²’æœ‰æ’ç­è³‡æ–™å¯ä»¥åŒ¯å‡º\n\nè«‹å…ˆç”¢ç”Ÿæ’ç­è¡¨');
                return;
            }
            
            alert('ğŸ“¤ åŒ¯å‡ºæ’ç­è¡¨åŠŸèƒ½\n\nå°‡æœƒç”¢ç”Ÿ Excel æª”æ¡ˆä¾›ä¸‹è¼‰');
        }
        
        // æ¸…é™¤æ’ç­åŠŸèƒ½
        function clearSchedule() {
            const monthKey = `${currentYear}-${currentMonthIndex}`;
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            
            if (!scheduleData[monthKey]) {
                alert('ğŸ—‘ï¸ ç›®å‰æ²’æœ‰æ’ç­è³‡æ–™å¯ä»¥æ¸…é™¤');
                return;
            }
            
            const confirmClear = window.confirm(`ç¢ºå®šè¦æ¸…é™¤ ${currentYear}å¹´${monthNames[currentMonthIndex]} çš„æ‰€æœ‰æ’ç­è³‡æ–™å—ï¼Ÿ\n\næ­¤æ“ä½œç„¡æ³•å¾©åŸï¼`);
            
            if (confirmClear) {
                delete scheduleData[monthKey];
                generateCalendar();
                updateStatistics();
                showNotification('ğŸ—‘ï¸ æ¸…é™¤å®Œæˆ', `${currentYear}å¹´${monthNames[currentMonthIndex]}çš„æ’ç­è³‡æ–™å·²æ¸…é™¤`);
            }
        }

        // å–å¾—ç‰¹å®šæœˆä»½çš„å‡æ—¥
        function getHolidaysForMonth(year, month) {
            const holidaysByMonth = {
                0: [1], // 1æœˆï¼šå…ƒæ—¦
                1: [8, 9, 10, 11, 12, 13, 14, 28], // 2æœˆï¼šæ˜¥ç¯€ã€å’Œå¹³ç´€å¿µæ—¥
                2: [], // 3æœˆ
                3: [4, 5], // 4æœˆï¼šå…’ç«¥ç¯€ã€æ¸…æ˜ç¯€
                4: [1], // 5æœˆï¼šå‹å‹•ç¯€
                5: [10], // 6æœˆï¼šç«¯åˆç¯€
                6: [], // 7æœˆ
                7: [15], // 8æœˆï¼šå…¬å¸é€±å¹´æ…¶
                8: [17], // 9æœˆï¼šä¸­ç§‹ç¯€
                9: [10], // 10æœˆï¼šåœ‹æ…¶æ—¥
                10: [], // 11æœˆ
                11: [25] // 12æœˆï¼šè–èª•ç¯€
            };
            return holidaysByMonth[month] || [];
        }

        // æœˆä»½åˆ‡æ›åŠŸèƒ½
        function previousMonth() {
            currentMonthIndex--;
            if (currentMonthIndex < 0) {
                currentMonthIndex = 11;
                currentYear--;
            }
            generateCalendar();
            updateCalendarData();
        }

        function nextMonth() {
            currentMonthIndex++;
            if (currentMonthIndex > 11) {
                currentMonthIndex = 0;
                currentYear++;
            }
            generateCalendar();
            updateCalendarData();
        }

        // æ›´æ–°æ—¥æ›†æ•¸æ“šçµ±è¨ˆ
        function updateCalendarData() {
            const monthNames = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            console.log(`åˆ‡æ›åˆ° ${currentYear}å¹´ ${monthNames[currentMonthIndex]}`);
            
            // é‡æ–°è¨ˆç®—çµ±è¨ˆæ•¸æ“š
            const daysInMonth = new Date(currentYear, currentMonthIndex + 1, 0).getDate();
            const holidays = getHolidaysForMonth(currentYear, currentMonthIndex);
            
            let workDays = 0;
            for (let day = 1; day <= daysInMonth; day++) {
                const dayOfWeek = new Date(currentYear, currentMonthIndex, day).getDay();
                const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
                const isHoliday = holidays.includes(day);
                
                if (!isWeekend && !isHoliday) {
                    workDays++;
                }
            }
            
            // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
            const statusNumbers = document.querySelectorAll('.status-number');
            if (statusNumbers.length >= 4) {
                statusNumbers[1].textContent = workDays; // å·¥ä½œæ—¥æ•¸
                statusNumbers[2].textContent = workDays * 2; // å€¼æ—¥äººæ¬¡ï¼ˆæ¯å¤©2äººï¼‰
            }
        }

        function importTemplate() {
            alert('ğŸ“¥ åŒ¯å…¥æ”¿åºœè¡Œäº‹æ›†ç¯„æœ¬\n\nå°‡æœƒè¼‰å…¥å®˜æ–¹å‡æ—¥è³‡æ–™');
        }

        // å“¡å·¥å¡ç‰‡é¸æ“‡åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const employeeCards = document.querySelectorAll('.employee-card');
            employeeCards.forEach(card => {
                card.addEventListener('click', function() {
                    // ç§»é™¤å…¶ä»–é¸ä¸­ç‹€æ…‹
                    employeeCards.forEach(c => c.classList.remove('selected'));
                    // æ·»åŠ é¸ä¸­ç‹€æ…‹
                    this.classList.add('selected');
                });
            });

            // ç”Ÿæˆæ—¥æ›†
            generateCalendar();
            
            // åˆå§‹åŒ–çµ±è¨ˆæ•¸æ“š
            updateStatistics();
            
            // åˆå§‹åŒ–å€¼æ—¥äº‹é …ç®¡ç†
            renderTaskList();
            
            // åˆå§‹åŒ–äººå“¡èª¿æ›ç®¡ç†
            renderAvailableEmployees();
            renderSubstituteRecords();
            updateSubstituteEmployeeOptions();
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const taskItem = this.closest('.task-item');
                    if (this.checked) {
                        taskItem.style.opacity = '0.7';
                        taskItem.style.textDecoration = 'line-through';
                    } else {
                        taskItem.style.opacity = '1';
                        taskItem.style.textDecoration = 'none';
                    }
                });
            });

            // è¡¨å–®æäº¤è™•ç†
            document.querySelectorAll('.btn-primary').forEach(btn => {
                if (btn.textContent.includes('æäº¤') || btn.textContent.includes('æ–°å¢å“¡å·¥') || btn.textContent.includes('æ–°å¢å‡æ—¥')) {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const modal = this.closest('.modal');
                        if (modal && modal.id !== 'taskModal') { // æ’é™¤taskModalï¼Œå› ç‚ºå®ƒæœ‰è‡ªå·±çš„è™•ç†å‡½æ•¸
                            setTimeout(() => {
                                alert('âœ… æ“ä½œæˆåŠŸå®Œæˆï¼');
                                modal.classList.remove('active');
                            }, 100);
                        }
                    });
                }
            });

            // è‡ªå‹•é€šçŸ¥ç³»çµ±æ¨¡æ“¬
            setInterval(function() {
                const now = new Date();
                const hour = now.getHours();
                const minute = now.getMinutes();
                
                // æ¨¡æ“¬æ¯æœˆ21è™Ÿ9é»çš„è‡ªå‹•æ’ç­
                if (hour === 9 && minute === 0) {
                    showNotification('ğŸ² ç³»çµ±è‡ªå‹•æ’ç­', 'ä¸‹å€‹æœˆçš„å€¼æ—¥æ’ç­è¡¨å·²è‡ªå‹•ç”¢ç”Ÿ');
                }
                
                // æ¨¡æ“¬æ¯æœˆ21è™Ÿ12é»çš„æ’ç­é€šçŸ¥
                if (hour === 12 && minute === 0) {
                    showNotification('ğŸ“‹ æ’ç­è¡¨é€šçŸ¥', 'æœ¬æœˆå€¼æ—¥æ’ç­è¡¨å·²ç™¼é€çµ¦å…¨é«”åŒä»');
                }
                
                // æ¨¡æ“¬å€¼æ—¥ç•¶å¤©12é»çš„å€‹äººæé†’
                if (hour === 12 && minute === 0) {
                    showNotification('â° å€¼æ—¥æé†’', 'æ‚¨ä»Šå¤©æ˜¯å€¼æ—¥ç”Ÿï¼Œè«‹è¨˜å¾—åŸ·è¡Œå€¼æ—¥å·¥ä½œ');
                }
            }, 60000); // æ¯åˆ†é˜æª¢æŸ¥ä¸€æ¬¡

            // ä»»å‹™å®Œæˆç‹€æ…‹åˆ‡æ›
        });

        function showNotification(title, message) {
            // å‰µå»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: white;
                border-left: 4px solid #667eea;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 9999;
                min-width: 300px;
                animation: slideIn 0.3s ease-out;
            `;
            
            notification.innerHTML = `
                <div style="font-weight: bold; color: #4a5568; margin-bottom: 5px;">${title}</div>
                <div style="color: #718096; font-size: 0.9rem;">${message}</div>
                <button onclick="this.parentElement.remove()" style="position: absolute; top: 5px; right: 10px; background: none; border: none; font-size: 1.2rem; cursor: pointer; color: #718096;">Ã—</button>
            `;
            
            document.body.appendChild(notification);
            
            // 3ç§’å¾Œè‡ªå‹•ç§»é™¤
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // æ•¸æ“šçµ±è¨ˆæ›´æ–°
        function updateStatistics() {
            // æ¨¡æ“¬çµ±è¨ˆæ•¸æ“šæ›´æ–°
            const stats = {
                todayDuty: Math.floor(Math.random() * 3) + 1,
                workDays: calculateWorkDays(), // ä½¿ç”¨è¨ˆç®—å‡ºçš„å·¥ä½œæ—¥
                monthlyDuty: calculateWorkDays() * 2, // æ¯å¤©2äºº
                employees: 12 + Math.floor(Math.random() * 8)
            };
            
            // æ›´æ–°é¡¯ç¤ºçš„çµ±è¨ˆæ•¸å­—
            const statusNumbers = document.querySelectorAll('.status-number');
            if (statusNumbers.length >= 4) {
                statusNumbers[0].textContent = stats.todayDuty;
                statusNumbers[1].textContent = stats.workDays;
                statusNumbers[2].textContent = stats.monthlyDuty;
                statusNumbers[3].textContent = stats.employees;
            }
        }

        // è¨ˆç®—ç•¶å‰æœˆä»½çš„å·¥ä½œæ—¥æ•¸
        function calculateWorkDays() {
            const daysInMonth = new Date(currentYear, currentMonthIndex + 1, 0).getDate();
            const holidays = getHolidaysForMonth(currentYear, currentMonthIndex);
            
            let workDays = 0;
            for (let day = 1; day <= daysInMonth; day++) {
                const dayOfWeek = new Date(currentYear, currentMonthIndex, day).getDay();
                const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
                const isHoliday = holidays.includes(day);
                
                if (!isWeekend && !isHoliday) {
                    workDays++;
                }
            }
            return workDays;
        }
        
        // æª¢æŸ¥ç•¶å‰æœˆä»½æ˜¯å¦å·²æœ‰æ’ç­
        function hasSchedule() {
            const monthKey = `${currentYear}-${currentMonthIndex}`;
            return scheduleData[monthKey] && Object.keys(scheduleData[monthKey]).length > 0;
        }
        
        // æ›´æ–°çµ±è¨ˆæ•¸æ“šï¼ˆæ ¹æ“šå¯¦éš›æ’ç­æƒ…æ³ï¼‰
        function updateStatistics() {
            const monthKey = `${currentYear}-${currentMonthIndex}`;
            const monthSchedule = scheduleData[monthKey];
            
            let scheduledDays = 0;
            let scheduledPeople = 0;
            
            if (monthSchedule) {
                scheduledDays = Object.keys(monthSchedule).length;
                scheduledPeople = Object.values(monthSchedule).reduce((total, daySchedule) => total + daySchedule.length, 0);
            }
            
            const totalWorkDays = calculateWorkDays();
            
            const stats = {
                todayDuty: hasSchedule() ? 2 : 0, // å¦‚æœæœ‰æ’ç­å‰‡é¡¯ç¤º2ï¼Œå¦å‰‡é¡¯ç¤º0
                workDays: totalWorkDays,
                monthlyDuty: scheduledPeople, // å¯¦éš›å·²æ’ç­äººæ¬¡
                employees: employees.length
            };
            
            // æ›´æ–°é¡¯ç¤ºçš„çµ±è¨ˆæ•¸å­—
            const statusNumbers = document.querySelectorAll('.status-number');
            const statusLabels = document.querySelectorAll('.status-label');
            
            if (statusNumbers.length >= 4) {
                statusNumbers[0].textContent = stats.todayDuty;
                statusNumbers[1].textContent = stats.workDays;
                statusNumbers[2].textContent = stats.monthlyDuty;
                statusNumbers[3].textContent = stats.employees;
                
                // æ›´æ–°æ¨™ç±¤é¡¯ç¤ºæ’ç­ç‹€æ…‹
                if (statusLabels.length >= 3) {
                    statusLabels[2].textContent = hasSchedule() ? 'å·²æ’ç­äººæ¬¡' : 'å¾…æ’ç­äººæ¬¡';
                }
            }
        }

        // éµç›¤å¿«æ·éµæ”¯æŒ
        document.addEventListener('keydown', function(e) {
            // ESC é—œé–‰ modal
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
            }
            
            // Ctrl + æ•¸å­—åˆ‡æ›æ¨™ç±¤
            if (e.ctrlKey && e.key >= '1' && e.key <= '5') {
                e.preventDefault();
                const tabs = ['schedule', 'tasks', 'substitute', 'employees', 'holidays'];
                const tabIndex = parseInt(e.key) - 1;
                if (tabs[tabIndex]) {
                    document.querySelectorAll('.nav-tab')[tabIndex].click();
                }
            }
        });

        // æ·»åŠ  CSS å‹•ç•«
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            .task-item {
                transition: all 0.3s ease;
            }
            
            .employee-card {
                transition: all 0.3s ease;
            }
            
            .calendar-day:hover .duty-person {
                transform: scale(1.05);
            }
            
            .btn {
                position: relative;
                overflow: hidden;
            }
            
            .btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                transition: left 0.5s;
            }
            
            .btn:hover::before {
                left: 100%;
            }
            
            .status-card {
                position: relative;
                overflow: hidden;
            }
            
            .status-card::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.1), transparent);
                transform: rotate(45deg);
                transition: all 0.5s;
                opacity: 0;
            }
            
            .status-card:hover::before {
                animation: shimmer 1s ease-in-out;
            }
            
            @keyframes shimmer {
                0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
                50% { opacity: 1; }
                100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // å·¥å…·æç¤ºåŠŸèƒ½
        function addTooltips() {
            const tooltipElements = [
                { selector: '.btn-primary', text: 'é»æ“ŠåŸ·è¡Œä¸»è¦æ“ä½œ' },
                { selector: '.employee-card', text: 'é»æ“Šé¸æ“‡å“¡å·¥' },
                { selector: '.calendar-day', text: 'æŸ¥çœ‹ç•¶æ—¥å€¼æ—¥å®‰æ’' },
                { selector: '.task-item input[type="checkbox"]', text: 'æ¨™è¨˜ä»»å‹™å®Œæˆç‹€æ…‹' }
            ];

            tooltipElements.forEach(item => {
                document.querySelectorAll(item.selector).forEach(element => {
                    element.title = item.text;
                });
            });
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–å·¥å…·æç¤º
        window.addEventListener('load', addTooltips);

        // éŸ¿æ‡‰å¼è™•ç†
        function handleResize() {
            const container = document.querySelector('.container');
            const width = window.innerWidth;
            
            if (width < 768) {
                container.style.padding = '10px';
            } else if (width < 1024) {
                container.style.padding = '15px';
            } else {
                container.style.padding = '20px';
            }
        }

        window.addEventListener('resize', handleResize);
        
        // é é¢å¯è¦‹æ€§è™•ç†
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                console.log('ç”¨æˆ¶åˆ‡æ›åˆ°å…¶ä»–é é¢');
            } else {
                console.log('ç”¨æˆ¶å›åˆ°å€¼æ—¥ç³»çµ±');
                updateStatistics(); // å›åˆ°é é¢æ™‚æ›´æ–°çµ±è¨ˆæ•¸æ“š
            }
        });

        // æ–°å¢å¿«é€Ÿè·³è½‰åŠŸèƒ½
        function jumpToMonth(year, month) {
            currentYear = year;
            currentMonthIndex = month;
            generateCalendar();
            updateCalendarData();
        }

        // æ–°å¢ä»Šå¤©æŒ‰éˆ•åŠŸèƒ½
        function goToToday() {
            const today = new Date();
            currentYear = today.getFullYear();
            currentMonthIndex = today.getMonth();
            generateCalendar();
            updateCalendarData();
        }
    </script>
</body>
</html>2024-08-23</td>
                                                      